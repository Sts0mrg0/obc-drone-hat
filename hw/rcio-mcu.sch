EESchema Schematic File Version 4
LIBS:obc-drone-hat-cache
EELAYER 26 0
EELAYER END
$Descr A3 16535 11693
encoding utf-8
Sheet 3 7
Title "OBC Drone Hat"
Date "2018-03-19"
Rev ""
Comp "VEHQ"
Comment1 "VEHQ-OBCDRONEHAT-V1"
Comment2 "Ermakov V.A."
Comment3 ""
Comment4 ""
$EndDescr
$Comp
L dronecode-conn:stm_swdo XP?
U 1 1 5AC130B8
P 10500 8350
F 0 "XP?" H 10728 8403 60  0000 L CNN
F 1 "stm_swdo" H 10728 8297 60  0000 L CNN
F 2 "" H 10500 8350 60  0001 C CNN
F 3 "" H 10500 8350 60  0001 C CNN
	1    10500 8350
	1    0    0    -1  
$EndComp
$Comp
L MCU_ST_STM32:STM32F030CCTx DD?
U 1 1 5AC13238
P 8250 3750
F 0 "DD?" H 5550 5450 50  0000 C CNN
F 1 "STM32F030CCTx" H 5800 2050 50  0000 C CNN
F 2 "Package_QFP:LQFP-48_7x7mm_P0.5mm" H 11050 5325 50  0001 R TNN
F 3 "http://www.st.com/st-web-ui/static/active/en/resource/technical/document/datasheet/DM00088500.pdf" H 8250 3750 50  0001 C CNN
	1    8250 3750
	1    0    0    -1  
$EndComp
$Comp
L power:GND #PWR?
U 1 1 5AC1340C
P 12750 8700
F 0 "#PWR?" H 12750 8450 50  0001 C CNN
F 1 "GND" H 12755 8527 50  0000 C CNN
F 2 "" H 12750 8700 50  0001 C CNN
F 3 "" H 12750 8700 50  0001 C CNN
	1    12750 8700
	1    0    0    -1  
$EndComp
$Comp
L power:+3.3V #PWR?
U 1 1 5AC1346E
P 12750 7950
F 0 "#PWR?" H 12750 7800 50  0001 C CNN
F 1 "+3.3V" H 12765 8123 50  0000 C CNN
F 2 "" H 12750 7950 50  0001 C CNN
F 3 "" H 12750 7950 50  0001 C CNN
	1    12750 7950
	1    0    0    -1  
$EndComp
$Comp
L power:+3.3V #PWR?
U 1 1 5AC308DD
P 8250 1700
F 0 "#PWR?" H 8250 1550 50  0001 C CNN
F 1 "+3.3V" H 8265 1873 50  0000 C CNN
F 2 "" H 8250 1700 50  0001 C CNN
F 3 "" H 8250 1700 50  0001 C CNN
	1    8250 1700
	1    0    0    -1  
$EndComp
$Comp
L power:GND #PWR?
U 1 1 5AC308EC
P 8250 5750
F 0 "#PWR?" H 8250 5500 50  0001 C CNN
F 1 "GND" H 8255 5577 50  0000 C CNN
F 2 "" H 8250 5750 50  0001 C CNN
F 3 "" H 8250 5750 50  0001 C CNN
	1    8250 5750
	1    0    0    -1  
$EndComp
Wire Wire Line
	8050 5450 8050 5600
Wire Wire Line
	8050 5600 8150 5600
Wire Wire Line
	8350 5600 8350 5450
Wire Wire Line
	8250 5450 8250 5600
Connection ~ 8250 5600
Wire Wire Line
	8250 5600 8350 5600
Wire Wire Line
	8150 5450 8150 5600
Connection ~ 8150 5600
Wire Wire Line
	8150 5600 8250 5600
Wire Wire Line
	8250 5600 8250 5750
Wire Wire Line
	8050 2050 8050 1900
Wire Wire Line
	8050 1900 8150 1900
Wire Wire Line
	8450 1900 8450 2050
Wire Wire Line
	8350 2050 8350 1900
Connection ~ 8350 1900
Wire Wire Line
	8350 1900 8450 1900
Wire Wire Line
	8250 2050 8250 1900
Connection ~ 8250 1900
Wire Wire Line
	8250 1900 8350 1900
Wire Wire Line
	8250 1900 8250 1700
Wire Wire Line
	8150 2050 8150 1900
Connection ~ 8150 1900
Wire Wire Line
	8150 1900 8250 1900
$Comp
L Device:C C?
U 1 1 5AC3127E
P 12350 8300
F 0 "C?" H 11850 8450 50  0000 L CNN
F 1 "0.1" H 12000 8450 50  0000 L CNN
F 2 "" H 12388 8150 50  0001 C CNN
F 3 "~" H 12350 8300 50  0001 C CNN
	1    12350 8300
	1    0    0    -1  
$EndComp
$Comp
L Device:C C?
U 1 1 5AC31497
P 12550 8300
F 0 "C?" H 11850 8350 50  0000 L CNN
F 1 "0.1" H 12000 8350 50  0000 L CNN
F 2 "" H 12588 8150 50  0001 C CNN
F 3 "~" H 12550 8300 50  0001 C CNN
	1    12550 8300
	1    0    0    -1  
$EndComp
$Comp
L Device:C C?
U 1 1 5AC314C5
P 12750 8300
F 0 "C?" H 11850 8250 50  0000 L CNN
F 1 "0.1" H 12000 8250 50  0000 L CNN
F 2 "" H 12788 8150 50  0001 C CNN
F 3 "~" H 12750 8300 50  0001 C CNN
	1    12750 8300
	1    0    0    -1  
$EndComp
$Comp
L Device:C C?
U 1 1 5AC314ED
P 12950 8300
F 0 "C?" H 11850 8150 50  0000 L CNN
F 1 "0.1" H 12000 8150 50  0000 L CNN
F 2 "" H 12988 8150 50  0001 C CNN
F 3 "~" H 12950 8300 50  0001 C CNN
	1    12950 8300
	1    0    0    -1  
$EndComp
$Comp
L Device:C C?
U 1 1 5AC31513
P 13150 8300
F 0 "C?" H 11850 8050 50  0000 L CNN
F 1 "0.1" H 12000 8050 50  0000 L CNN
F 2 "" H 13188 8150 50  0001 C CNN
F 3 "~" H 13150 8300 50  0001 C CNN
	1    13150 8300
	1    0    0    -1  
$EndComp
Wire Wire Line
	12350 8150 12350 8050
Wire Wire Line
	12350 8050 12550 8050
Wire Wire Line
	13150 8050 13150 8150
Wire Wire Line
	12950 8150 12950 8050
Connection ~ 12950 8050
Wire Wire Line
	12950 8050 13150 8050
Wire Wire Line
	12750 8150 12750 8050
Connection ~ 12750 8050
Wire Wire Line
	12750 8050 12950 8050
Wire Wire Line
	12550 8150 12550 8050
Connection ~ 12550 8050
Wire Wire Line
	12550 8050 12750 8050
Wire Wire Line
	12750 8050 12750 7950
Wire Wire Line
	12350 8450 12350 8550
Wire Wire Line
	12350 8550 12550 8550
Wire Wire Line
	13150 8550 13150 8450
Wire Wire Line
	12950 8450 12950 8550
Connection ~ 12950 8550
Wire Wire Line
	12950 8550 13150 8550
Wire Wire Line
	12750 8450 12750 8550
Connection ~ 12750 8550
Wire Wire Line
	12750 8550 12950 8550
Wire Wire Line
	12550 8450 12550 8550
Connection ~ 12550 8550
Wire Wire Line
	12550 8550 12750 8550
Wire Wire Line
	12750 8550 12750 8700
Text GLabel 4300 2450 0    60   Input ~ 0
~STM_RESET
Wire Wire Line
	4300 2450 5350 2450
Text Label 4550 2450 0    60   ~ 0
~NRST
$Comp
L power:+3.3V #PWR?
U 1 1 5AC3643C
P 9950 7950
F 0 "#PWR?" H 9950 7800 50  0001 C CNN
F 1 "+3.3V" H 9965 8123 50  0000 C CNN
F 2 "" H 9950 7950 50  0001 C CNN
F 3 "" H 9950 7950 50  0001 C CNN
	1    9950 7950
	1    0    0    -1  
$EndComp
$Comp
L power:GND #PWR?
U 1 1 5AC36455
P 9950 8750
F 0 "#PWR?" H 9950 8500 50  0001 C CNN
F 1 "GND" H 9955 8577 50  0000 C CNN
F 2 "" H 9950 8750 50  0001 C CNN
F 3 "" H 9950 8750 50  0001 C CNN
	1    9950 8750
	1    0    0    -1  
$EndComp
Wire Wire Line
	10100 8100 9950 8100
Wire Wire Line
	9950 8100 9950 7950
Wire Wire Line
	10100 8300 9950 8300
Wire Wire Line
	9950 8300 9950 8750
Wire Wire Line
	10100 8200 9550 8200
Wire Wire Line
	10100 8400 9550 8400
Wire Wire Line
	10100 8500 9550 8500
Wire Wire Line
	10100 8600 9550 8600
Text Label 9550 8200 0    60   ~ 0
SWCLK
Text Label 9550 8400 0    60   ~ 0
SWDIO
Text Label 9550 8500 0    60   ~ 0
~NRST
Text Label 9550 8600 0    60   ~ 0
SWO
Text GLabel 3450 4850 0    60   Input ~ 0
RPI_SPI0_MOSI
Text GLabel 3450 4950 0    60   Output ~ 0
RPI_SPI0_MISO
Text GLabel 3450 5050 0    60   Input ~ 0
RPI_SPI0_SCLK
Text GLabel 4300 2650 0    60   Input ~ 0
STM_BOOT0
Wire Wire Line
	4300 2650 5350 2650
Text GLabel 3450 5200 0    60   Input ~ 0
~RPI_SPI0_CE1
Text GLabel 3450 5350 0    60   Output ~ 0
~STM_INT
Text GLabel 3100 4300 0    60   BiDi ~ 0
RPI_SCL
Text GLabel 3100 4200 0    60   BiDi ~ 0
RPI_SDA
Text GLabel 4300 2850 0    60   Input ~ 0
HAT_CLK
Wire Wire Line
	4300 2850 5350 2850
Text GLabel 3500 6500 0    60   Output ~ 0
SERVO0
Text GLabel 3500 6600 0    60   Output ~ 0
SERVO1
Text GLabel 3500 6700 0    60   Output ~ 0
SERVO2
Text GLabel 3500 6800 0    60   Output ~ 0
SERVO3
Text GLabel 6350 6550 0    60   UnSpc ~ 0
ADC_Vbat
Text GLabel 6350 6650 0    60   UnSpc ~ 0
ADC_V5hat
$Comp
L dronecode-conn:FrSky-XSR XP?
U 1 1 5AC46946
P 5350 7950
F 0 "XP?" H 5578 8003 60  0000 L CNN
F 1 "FrSky-XSR" H 5578 7897 60  0000 L CNN
F 2 "" H 5350 7950 60  0001 C CNN
F 3 "" H 5350 7950 60  0001 C CNN
	1    5350 7950
	1    0    0    -1  
$EndComp
Text Notes 4250 8800 0    60   ~ 0
NOTE: XSR module uses 5-pin conn.\nI decided to use 6-pin JST GH, to reduce nomenclature.
$Comp
L power:GND #PWR?
U 1 1 5AC47AE2
P 4850 8300
F 0 "#PWR?" H 4850 8050 50  0001 C CNN
F 1 "GND" H 4855 8127 50  0000 C CNN
F 2 "" H 4850 8300 50  0001 C CNN
F 3 "" H 4850 8300 50  0001 C CNN
	1    4850 8300
	1    0    0    -1  
$EndComp
Wire Wire Line
	4950 8100 4850 8100
Wire Wire Line
	4850 8100 4850 8200
Wire Wire Line
	4950 8200 4850 8200
Connection ~ 4850 8200
Wire Wire Line
	4850 8200 4850 8300
Wire Wire Line
	4950 7700 4350 7700
Wire Wire Line
	4950 7800 4350 7800
Wire Wire Line
	4950 7900 4350 7900
$Comp
L poweric:NCP361SN DA?
U 1 1 5AC5BECB
P 3300 8300
F 0 "DA?" H 3100 8750 60  0000 C CNN
F 1 "NCP361SN" H 3350 7900 60  0000 C CNN
F 2 "" H 3300 8300 60  0000 C CNN
F 3 "http://www.onsemi.com/pub_link/Collateral/NCP361-D.PDF" H 4350 7400 60  0000 C CNN
	1    3300 8300
	1    0    0    -1  
$EndComp
$Comp
L power:GND #PWR?
U 1 1 5AC5C395
P 3900 8750
F 0 "#PWR?" H 3900 8500 50  0001 C CNN
F 1 "GND" H 3905 8577 50  0000 C CNN
F 2 "" H 3900 8750 50  0001 C CNN
F 3 "" H 3900 8750 50  0001 C CNN
	1    3900 8750
	1    0    0    -1  
$EndComp
$Comp
L power:GND #PWR?
U 1 1 5AC5C3B2
P 2550 9100
F 0 "#PWR?" H 2550 8850 50  0001 C CNN
F 1 "GND" H 2555 8927 50  0000 C CNN
F 2 "" H 2550 9100 50  0001 C CNN
F 3 "" H 2550 9100 50  0001 C CNN
	1    2550 9100
	1    0    0    -1  
$EndComp
$Comp
L Device:R R?
U 1 1 5AC5C5BF
P 2550 8750
F 0 "R?" H 2620 8796 50  0000 L CNN
F 1 "10k" H 2620 8705 50  0000 L CNN
F 2 "" V 2480 8750 50  0001 C CNN
F 3 "~" H 2550 8750 50  0001 C CNN
	1    2550 8750
	1    0    0    -1  
$EndComp
Wire Wire Line
	2800 8450 2550 8450
Wire Wire Line
	2550 8600 2550 8450
Connection ~ 2550 8450
Wire Wire Line
	2550 8450 2350 8450
Wire Wire Line
	2550 8900 2550 9000
Wire Wire Line
	3800 8550 3900 8550
Wire Wire Line
	3900 8550 3900 8750
Wire Wire Line
	4950 8000 3900 8000
Text Label 4000 8000 0    60   ~ 0
Rx_5V
Text Label 4350 7700 0    60   ~ 0
Rx_SBUS
Text Label 4350 7800 0    60   ~ 0
Rx_CPPM
Text Label 4350 7900 0    60   ~ 0
Rx_S.port
$Comp
L power:+5VP #PWR?
U 1 1 5AC6272A
P 2250 7900
F 0 "#PWR?" H 2250 7750 50  0001 C CNN
F 1 "+5VP" H 2265 8073 50  0000 C CNN
F 2 "" H 2250 7900 50  0001 C CNN
F 3 "" H 2250 7900 50  0001 C CNN
	1    2250 7900
	1    0    0    -1  
$EndComp
$Comp
L Device:C C?
U 1 1 5AC63063
P 2250 8750
F 0 "C?" H 2365 8796 50  0000 L CNN
F 1 "0.1" H 2365 8705 50  0000 L CNN
F 2 "" H 2288 8600 50  0001 C CNN
F 3 "~" H 2250 8750 50  0001 C CNN
	1    2250 8750
	1    0    0    -1  
$EndComp
$Comp
L Device:C C?
U 1 1 5AC631FE
P 3900 8250
F 0 "C?" H 4015 8296 50  0000 L CNN
F 1 "0.1" H 4015 8205 50  0000 L CNN
F 2 "" H 3938 8100 50  0001 C CNN
F 3 "~" H 3900 8250 50  0001 C CNN
	1    3900 8250
	1    0    0    -1  
$EndComp
Wire Wire Line
	3900 8000 3900 8100
Connection ~ 3900 8000
Wire Wire Line
	3900 8000 3800 8000
Wire Wire Line
	3900 8400 3900 8550
Connection ~ 3900 8550
Wire Wire Line
	2550 9000 2250 9000
Wire Wire Line
	2250 9000 2250 8900
Connection ~ 2550 9000
Wire Wire Line
	2550 9000 2550 9100
Text Label 2350 8450 0    60   ~ 0
~Rx_EN
Wire Wire Line
	2250 7900 2250 8000
Wire Wire Line
	2800 8000 2250 8000
Connection ~ 2250 8000
Wire Wire Line
	2250 8000 2250 8600
NoConn ~ 2800 8550
$EndSCHEMATC

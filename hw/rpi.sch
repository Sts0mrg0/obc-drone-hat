EESchema Schematic File Version 2
LIBS:power
LIBS:device
LIBS:transistors
LIBS:conn
LIBS:linear
LIBS:regul
LIBS:74xx
LIBS:cmos4000
LIBS:adc-dac
LIBS:memory
LIBS:xilinx
LIBS:microcontrollers
LIBS:dsp
LIBS:microchip
LIBS:analog_switches
LIBS:motorola
LIBS:texas
LIBS:intel
LIBS:audio
LIBS:interface
LIBS:digital-audio
LIBS:philips
LIBS:display
LIBS:cypress
LIBS:siliconi
LIBS:opto
LIBS:atmel
LIBS:contrib
LIBS:valves
LIBS:rpi_con
LIBS:ic
LIBS:obc-drone-hat-cache
EELAYER 25 0
EELAYER END
$Descr A4 8268 11693 portrait
encoding utf-8
Sheet 2 5
Title "OBC Drone Hat"
Date "2018-03-19"
Rev ""
Comp "VEHQ"
Comment1 "VEHQ-OBCDRONEHAT-V1"
Comment2 "Ermakov V.A."
Comment3 ""
Comment4 ""
$EndDescr
$Comp
L Rpi_40PIN XP?
U 1 1 5AAFFE0B
P 4400 2900
F 0 "XP?" H 3850 4100 60  0000 C CNN
F 1 "Rpi_40PIN" H 4450 1700 60  0000 C CNN
F 2 "" H 4050 3000 60  0001 C CNN
F 3 "" H 4050 3000 60  0001 C CNN
	1    4400 2900
	1    0    0    -1  
$EndComp
$Comp
L +3.3VP #PWR01
U 1 1 5AAFFF4C
P 3350 1700
F 0 "#PWR01" H 3500 1650 50  0001 C CNN
F 1 "+3.3VP" H 3350 1800 50  0000 C CNN
F 2 "" H 3350 1700 50  0001 C CNN
F 3 "" H 3350 1700 50  0001 C CNN
	1    3350 1700
	1    0    0    -1  
$EndComp
$Comp
L +5VP #PWR02
U 1 1 5AAFFF63
P 5500 1700
F 0 "#PWR02" H 5500 1550 50  0001 C CNN
F 1 "+5VP" H 5500 1840 50  0000 C CNN
F 2 "" H 5500 1700 50  0001 C CNN
F 3 "" H 5500 1700 50  0001 C CNN
	1    5500 1700
	1    0    0    -1  
$EndComp
$Comp
L GND #PWR03
U 1 1 5AAFFFA2
P 3250 4200
F 0 "#PWR03" H 3250 3950 50  0001 C CNN
F 1 "GND" H 3250 4050 50  0000 C CNN
F 2 "" H 3250 4200 50  0001 C CNN
F 3 "" H 3250 4200 50  0001 C CNN
	1    3250 4200
	1    0    0    -1  
$EndComp
Wire Wire Line
	3550 1950 3350 1950
Wire Wire Line
	3350 1700 3350 1950
Wire Wire Line
	3350 1950 3350 2750
Wire Wire Line
	3350 2750 3550 2750
Connection ~ 3350 1950
Wire Wire Line
	3550 2350 3250 2350
Wire Wire Line
	3250 2350 3250 3150
Wire Wire Line
	3250 3150 3250 3850
Wire Wire Line
	3250 3850 3250 4200
Wire Wire Line
	3550 3150 3250 3150
Connection ~ 3250 3150
Wire Wire Line
	3550 3850 3250 3850
Connection ~ 3250 3850
$Comp
L GND #PWR04
U 1 1 5AB000E4
P 5600 4200
F 0 "#PWR04" H 5600 3950 50  0001 C CNN
F 1 "GND" H 5600 4050 50  0000 C CNN
F 2 "" H 5600 4200 50  0001 C CNN
F 3 "" H 5600 4200 50  0001 C CNN
	1    5600 4200
	1    0    0    -1  
$EndComp
Wire Wire Line
	5500 2050 5250 2050
Wire Wire Line
	5500 1700 5500 1950
Wire Wire Line
	5500 1950 5500 2050
Wire Wire Line
	5250 1950 5500 1950
Connection ~ 5500 1950
Wire Wire Line
	5250 2150 5600 2150
Wire Wire Line
	5600 2150 5600 2550
Wire Wire Line
	5600 2550 5600 2850
Wire Wire Line
	5600 2850 5600 3350
Wire Wire Line
	5600 3350 5600 3550
Wire Wire Line
	5600 3550 5600 4200
Wire Wire Line
	5250 2550 5600 2550
Connection ~ 5600 2550
Wire Wire Line
	5250 2850 5600 2850
Connection ~ 5600 2850
Wire Wire Line
	5250 3350 5600 3350
Connection ~ 5600 3350
Wire Wire Line
	5250 3550 5600 3550
Connection ~ 5600 3550
Text GLabel 6150 2250 2    60   Output ~ 0
RPI_TX
Text GLabel 6150 2350 2    60   Input ~ 0
RPI_RX
Wire Wire Line
	5250 2250 6150 2250
Wire Wire Line
	5250 2350 6150 2350
Text GLabel 2800 2250 0    60   Output ~ 0
RPI_GPCLK0
Text GLabel 2800 2150 0    60   BiDi ~ 0
RPI_SCL
Text GLabel 2800 2050 0    60   BiDi ~ 0
RPI_SDA
Wire Wire Line
	2800 2050 3550 2050
Wire Wire Line
	2800 2150 3550 2150
Wire Wire Line
	2800 2250 3550 2250
Text GLabel 2800 2850 0    60   Output ~ 0
RPI_SPI0_MOSI
Text GLabel 2800 2950 0    60   Input ~ 0
RPI_SPI0_MISO
Text GLabel 2800 3050 0    60   Output ~ 0
RPI_SPI0_SCLK
Text GLabel 6150 3050 2    60   Output ~ 0
RPI_SPI0_CE0
Text GLabel 6150 3150 2    60   Output ~ 0
RPI_SPI0_CE1
Wire Wire Line
	5250 3050 6150 3050
Wire Wire Line
	5250 3150 6150 3150
Wire Wire Line
	2800 2850 3550 2850
Wire Wire Line
	3550 2950 2800 2950
Wire Wire Line
	2800 3050 3550 3050
$Comp
L CAT24 DD?
U 1 1 5AB0087D
P 4300 6300
F 0 "DD?" H 4050 6750 60  0000 C CNN
F 1 "CAT24C32" H 4300 5850 60  0000 C CNN
F 2 "" V 2700 7750 60  0001 C CNN
F 3 "" V 2700 7750 60  0001 C CNN
	1    4300 6300
	1    0    0    -1  
$EndComp
Wire Wire Line
	5250 3250 6150 3250
Wire Wire Line
	3550 3250 2800 3250
Text Label 2800 3250 0    60   ~ 0
ID_SDA
Text Label 6150 3250 2    60   ~ 0
ID_SCL
$Comp
L GND #PWR05
U 1 1 5AB011CD
P 5200 6800
F 0 "#PWR05" H 5200 6550 50  0001 C CNN
F 1 "GND" H 5200 6650 50  0000 C CNN
F 2 "" H 5200 6800 50  0001 C CNN
F 3 "" H 5200 6800 50  0001 C CNN
	1    5200 6800
	1    0    0    -1  
$EndComp
$Comp
L +3.3VP #PWR06
U 1 1 5AB01486
P 5100 5400
F 0 "#PWR06" H 5250 5350 50  0001 C CNN
F 1 "+3.3VP" H 5100 5500 50  0000 C CNN
F 2 "" H 5100 5400 50  0001 C CNN
F 3 "" H 5100 5400 50  0001 C CNN
	1    5100 5400
	1    0    0    -1  
$EndComp
Wire Wire Line
	4850 6550 5200 6550
Wire Wire Line
	5200 6550 5350 6550
Wire Wire Line
	5200 6550 5200 6800
Wire Wire Line
	5100 6450 4850 6450
Wire Wire Line
	5100 5400 5100 5500
Wire Wire Line
	5100 5500 5100 6450
$Comp
L R R?
U 1 1 5AB0176B
P 4950 5800
F 0 "R?" V 5030 5800 50  0000 C CNN
F 1 "1k" V 4950 5800 50  0000 C CNN
F 2 "" V 4880 5800 50  0001 C CNN
F 3 "" H 4950 5800 50  0001 C CNN
	1    4950 5800
	1    0    0    -1  
$EndComp
Wire Wire Line
	4850 6050 4950 6050
Wire Wire Line
	4950 6050 5350 6050
Wire Wire Line
	4950 6050 4950 5950
Wire Wire Line
	4950 5650 4950 5500
Wire Wire Line
	4950 5500 5100 5500
Connection ~ 5100 5500
Wire Wire Line
	2850 6050 3200 6050
Wire Wire Line
	3200 6050 3750 6050
Wire Wire Line
	2850 6150 3300 6150
Wire Wire Line
	3300 6150 3750 6150
$Comp
L R R?
U 1 1 5AB01D57
P 3200 5800
F 0 "R?" V 3400 5800 50  0000 C CNN
F 1 "3.9k" V 3200 5800 50  0000 C CNN
F 2 "" V 3130 5800 50  0001 C CNN
F 3 "" H 3200 5800 50  0001 C CNN
	1    3200 5800
	1    0    0    -1  
$EndComp
$Comp
L R R?
U 1 1 5AB01DDA
P 3300 5800
F 0 "R?" V 3500 5800 50  0000 C CNN
F 1 "3.9k" V 3300 5800 50  0000 C CNN
F 2 "" V 3230 5800 50  0001 C CNN
F 3 "" H 3300 5800 50  0001 C CNN
	1    3300 5800
	1    0    0    -1  
$EndComp
$Comp
L +3.3VP #PWR07
U 1 1 5AB01EB8
P 3300 5400
F 0 "#PWR07" H 3450 5350 50  0001 C CNN
F 1 "+3.3VP" H 3300 5500 50  0000 C CNN
F 2 "" H 3300 5400 50  0001 C CNN
F 3 "" H 3300 5400 50  0001 C CNN
	1    3300 5400
	1    0    0    -1  
$EndComp
Wire Wire Line
	3200 5950 3200 6050
Connection ~ 3200 6050
Wire Wire Line
	3300 5950 3300 6150
Connection ~ 3300 6150
Wire Wire Line
	3300 5400 3300 5550
Wire Wire Line
	3300 5550 3300 5650
Wire Wire Line
	3200 5650 3200 5550
Wire Wire Line
	3200 5550 3300 5550
Connection ~ 3300 5550
Text Label 2850 6050 0    60   ~ 0
ID_SCL
Text Label 2850 6150 0    60   ~ 0
ID_SDA
$Comp
L TEST_2P J?
U 1 1 5AB022DC
P 5350 6300
F 0 "J?" H 5350 6360 50  0000 C CNN
F 1 "Write Enable" H 5350 6230 50  0000 C CNN
F 2 "" H 5350 6300 50  0001 C CNN
F 3 "" H 5350 6300 50  0001 C CNN
	1    5350 6300
	0    1    1    0   
$EndComp
Wire Wire Line
	5350 6050 5350 6100
Connection ~ 4950 6050
Wire Wire Line
	5350 6550 5350 6500
Connection ~ 5200 6550
$Comp
L GND #PWR08
U 1 1 5AB0290A
P 3650 6850
F 0 "#PWR08" H 3650 6600 50  0001 C CNN
F 1 "GND" H 3650 6700 50  0000 C CNN
F 2 "" H 3650 6850 50  0001 C CNN
F 3 "" H 3650 6850 50  0001 C CNN
	1    3650 6850
	1    0    0    -1  
$EndComp
Wire Wire Line
	3750 6350 3650 6350
Wire Wire Line
	3650 6350 3650 6450
Wire Wire Line
	3650 6450 3650 6550
Wire Wire Line
	3650 6550 3650 6850
Wire Wire Line
	3750 6450 3650 6450
Connection ~ 3650 6450
Wire Wire Line
	3750 6550 3650 6550
Connection ~ 3650 6550
Text Notes 3850 5200 0    60   ~ 0
HAT ID EEPROM
Text Label 2900 2050 0    60   ~ 0
RPI_SDA
Text Label 2900 2150 0    60   ~ 0
RPI_SCL
Text Notes 2900 4750 0    60   ~ 0
NOTEs:\n1. GPCLK0 mode 1 (19.2 MHz) used as clock source for other ICs\n2. RPI I2C already have 1.8k pull-up to 3v3\n3. RPI 3B can supply up to 500 mA at 3v3
Text GLabel 2800 2450 0    60   Input ~ 0
~SER_INT
Wire Wire Line
	2800 2450 3550 2450
Text GLabel 2800 2550 0    60   Output ~ 0
~STM_RESET
Text GLabel 2800 2650 0    60   Output ~ 0
STM_BOOT0
Wire Wire Line
	3550 2550 2800 2550
Wire Wire Line
	3550 2650 2800 2650
$Comp
L DMG2305UX VT?
U 1 1 5AB12B0E
P 4150 8350
F 0 "VT?" V 4400 8450 50  0000 L CNN
F 1 "DMG2305UX" V 4400 7950 50  0000 L CNN
F 2 "" H 4350 8450 50  0001 C CNN
F 3 "" H 4150 8350 50  0001 C CNN
	1    4150 8350
	0    -1   -1   0   
$EndComp
Wire Wire Line
	3650 8250 3650 8250
Wire Wire Line
	3650 8250 3950 8250
Wire Wire Line
	4350 8250 4650 8250
Wire Wire Line
	4650 8250 4650 8250
Wire Wire Line
	4650 8500 4650 8250
Connection ~ 4650 8250
Wire Wire Line
	3650 8500 3650 8250
Connection ~ 3650 8250
Wire Wire Line
	3650 8900 3650 9000
Wire Wire Line
	3650 9000 3650 9150
Connection ~ 3650 9000
$Comp
L GND #PWR?
U 1 1 5AB1380A
P 4650 9550
F 0 "#PWR?" H 4650 9300 50  0001 C CNN
F 1 "GND" H 4650 9400 50  0000 C CNN
F 2 "" H 4650 9550 50  0001 C CNN
F 3 "" H 4650 9550 50  0001 C CNN
	1    4650 9550
	1    0    0    -1  
$EndComp
$Comp
L R R?
U 1 1 5AB13830
P 4650 9300
F 0 "R?" V 4730 9300 50  0000 C CNN
F 1 "47k" V 4650 9300 50  0000 C CNN
F 2 "" V 4580 9300 50  0001 C CNN
F 3 "" H 4650 9300 50  0001 C CNN
	1    4650 9300
	1    0    0    -1  
$EndComp
$Comp
L R R?
U 1 1 5AB13B9E
P 3650 9300
F 0 "R?" V 3730 9300 50  0000 C CNN
F 1 "10k" V 3650 9300 50  0000 C CNN
F 2 "" V 3580 9300 50  0001 C CNN
F 3 "" H 3650 9300 50  0001 C CNN
	1    3650 9300
	1    0    0    -1  
$EndComp
Wire Wire Line
	4650 8900 4650 9000
Wire Wire Line
	4650 9000 4650 9150
Wire Wire Line
	4150 8550 4150 9000
Wire Wire Line
	4150 9000 4650 9000
Connection ~ 4650 9000
Wire Wire Line
	3950 8700 4050 8700
Wire Wire Line
	4050 8700 4350 8700
Wire Wire Line
	4050 8700 4050 9000
Wire Wire Line
	4050 9000 3650 9000
Connection ~ 4050 8700
$Comp
L GND #PWR?
U 1 1 5AB1428A
P 3650 9550
F 0 "#PWR?" H 3650 9300 50  0001 C CNN
F 1 "GND" H 3650 9400 50  0000 C CNN
F 2 "" H 3650 9550 50  0001 C CNN
F 3 "" H 3650 9550 50  0001 C CNN
	1    3650 9550
	1    0    0    -1  
$EndComp
Wire Wire Line
	3650 9450 3650 9550
Wire Wire Line
	4650 9450 4650 9550
$Comp
L DMMT5401 VT?
U 1 1 5AB144D9
P 3750 8700
F 0 "VT?" H 3950 8750 50  0000 L CNN
F 1 "DMMT5401" H 3950 8650 50  0000 L CNN
F 2 "" H 3950 8800 50  0001 C CNN
F 3 "" H 3750 8700 50  0001 C CNN
	1    3750 8700
	-1   0    0    1   
$EndComp
$Comp
L DMMT5401 VT?
U 2 1 5AB14574
P 4550 8700
F 0 "VT?" H 4750 8750 50  0000 L CNN
F 1 "DMMT5401" H 4750 8650 50  0000 L CNN
F 2 "" H 4750 8800 50  0001 C CNN
F 3 "" H 4550 8700 50  0001 C CNN
	2    4550 8700
	1    0    0    1   
$EndComp
$Comp
L +5VP #PWR?
U 1 1 5AB14AE1
P 4650 8000
F 0 "#PWR?" H 4650 7850 50  0001 C CNN
F 1 "+5VP" H 4650 8140 50  0000 C CNN
F 2 "" H 4650 8000 50  0001 C CNN
F 3 "" H 4650 8000 50  0001 C CNN
	1    4650 8000
	1    0    0    -1  
$EndComp
Wire Wire Line
	4650 8250 4650 8000
$Comp
L +5V #PWR?
U 1 1 5AB1599D
P 3650 8000
F 0 "#PWR?" H 3650 7850 50  0001 C CNN
F 1 "+5V" H 3650 8140 50  0000 C CNN
F 2 "" H 3650 8000 50  0001 C CNN
F 3 "" H 3650 8000 50  0001 C CNN
	1    3650 8000
	1    0    0    -1  
$EndComp
Wire Wire Line
	3650 8000 3650 8250
Text Notes 3400 7700 0    60   ~ 0
Zero voltage drop diode circuit\nRecommended for HAT power supply
$EndSCHEMATC
